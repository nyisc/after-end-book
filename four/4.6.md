## 4.6 如何利用微服务进行分布式开发
##### 什么是分布式
在一个企业项目中，一个项目可能会有很密集的业务，这些业务需要计算机进行业务处理，很显然，随着访问量的增高，业务模块的扩大，一台计算机负责了太多的运算，因此在一台服务器上完成的计算操作分给两台甚至更多台的主机一起完成，这样的开发模式就成为分布式开发。

##### 分布式特点
##### 分布式存储
分布式存储是将数据[分散存储](https://baike.baidu.com/item/%E5%88%86%E6%95%A3%E5%AD%98%E5%82%A8)在多台独立的设备上。传统的[网络存储](https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E5%AD%98%E5%82%A8)系统采用集中的[存储服务器](https://baike.baidu.com/item/%E5%AD%98%E5%82%A8%E6%9C%8D%E5%8A%A1%E5%99%A8)存放所有数据，存储服务器成为系统性能的瓶颈，也是可靠性和安全性的焦点，不能满足大规模存储应用的需要。分布式网络存储系统采用可扩展的[系统结构](https://baike.baidu.com/item/%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84)，利用多台存储服务器分担存储负荷，利用位置服务器定位存储信息，它不但提高了系统的可靠性、可用性和存取效率，还易于扩展。
##### 分布式计算
分布式计算( Distributed computing )是一种把需要进行大量计算的工程数据分割成小块，由多台计算机分别计算，在上传运算结果后，将结果统一合并得出数据结论的科学。

##### 分布式架构设计
##### 负载均衡
分布式方案会在将业务分在网络中的各个计算机节点。如何有效的选择合适的节点，便是负载均衡技术。
##### 远程调用RPC
由于计算机之间需要进行通信，服务之间的调用变得复杂，RPC将复杂的通信进行封装，提供接口，实现了远程调用。
##### 服务注册与发现
由于服务之间彼此独立，因此发现服务是一件困难的事情，因此，每一个服务应提前注册到注册中心。
##### 监控
业务运行会出现各种问题，由于采用通信进行联系各个服务，服务运行的故障不容易发现，因此监控中心要实时监控各个服务。
##### 消息队列
一个业务的产生，往往会触发很多事件之后才能进行继续运行，采用异步通信的为了实现服务与服务之间的解耦，往往需要发布订阅的模式。

##### 微服务与分布式的联系
分布式只是一种手段，把不同的机器分散在不同的地方，然后这些机器间相互协助完成业务。**微服务是一种特殊的分布式**。分布式是为了解决计算机压力，而微服务则是为了分散业务，将业务划分成独立自治的组件，组件之间相互协作提供服务。

##### 基于微服务的分布式开发
##### 设计我们的微服务遵循原则

1. **立方体拆分原则**

X轴：水平复制
Z轴：分区集群
Y轴：拆分服务

2. **前后端分离**

杜绝将后端嵌入到前端，使前后端职责更加明确

3. **无状态服务**

利用分布式，服务调用动态伸缩，服务运行增删节点“无状态”

4. **Restful通信风格**

无状态协议HTTP，具备先天优势，扩展能力很强。例如需要安全加密是，有现成的成熟方案HTTPS可用。